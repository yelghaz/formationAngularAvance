<div class="container">
    <br />
    <h1 class="text-danger text-center">Achat de tickets</h1>

    <div class="row">
        <div class="col-md-3">
            <button class="btn btn-danger" (click)='addTicket()'>Ajouter un ticket</button>
        </div>
    </div>

    <form [formGroup]='buyTicketForm' novalidate class="text-center border border-light p-5" (ngSubmit)='buyTickets()'>
        <input formControlName='emailControl' type="text" class="form-control mb-4" placeholder="Enter Email" />
        <input formControlName='phoneControl' type="text" class="form-control mb-4" placeholder="Enter Phone" />
        <form formGroupName='address'>
            <input formControlName='streetControl' type="text" class="form-control mb-4"
                placeholder="Enter Street Name" />
            <input formControlName='postalcodeControl' type="number" class="form-control mb-4"
                placeholder="Enter Postal code " />
        </form>

        <div formArrayName="tickets" *ngFor="let t of tickets.controls; let i = index">

            <div [formGroupName]="i">
                <input formControlName='name' id="{{'name'+i}}" type="text" class="form-control mb-4"
                    placeholder="Enter Name" />
                <div *ngIf="t?.get('name')?.hasError('required') && t?.get('name')?.touched">
                    Le nom est requis
                </div>
                <input formControlName='age' id="{{'age' + i}}" type="number" class="form-control mb-4"
                    placeholder="Enter Age " />
                <div *ngIf="t?.get('age')?.hasError('required') && t?.get('age')?.touched">
                    l'age est requis
                </div>
            </div>

        </div>

        <button class="btn btn-danger" [disabled]='buyTicketForm.invalid'>Submit</button>
    </form>

</div>